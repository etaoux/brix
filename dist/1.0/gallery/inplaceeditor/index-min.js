KISSY.add("brix/gallery/inplaceeditor/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments),this._v=null,this._x=0,this._y=0}return c.ATTRS={autoRender:{value:!0},tmpl:{value:'<div class="inplaceeditor-popup"><input class="input" type="text" value=""></div>'}},c.EVENTS={input:{focusout:function(a){this.hide()},keydown:function(a){a.keyCode==13&&this.hide()}}},c.FIRES={show:"show",hide:"hide",valueChange:"valueChange"},c.METHODS={show:function(a,b,d,e){var f=this.get("el"),g=f.one("input");f.css({visibility:"visible"}),a!==undefined&&(this._x=a),b!==undefined&&(this._y=b),f.css({left:this._x,top:this._y}),e&&g.css(e),g[0].focus(),d!==undefined&&(this._v=d,g.val(d)),this.fire(c.FIRES.show)},hide:function(){var b=this.getValue(),d=this.get("el");if(this._v!=b&&this.fire(c.FIRES.valueChange,{value:b})===!1){this._v=b,a.later(function(){try{d.one("input")[0].focus()}catch(a){}},50);return}d.css({visibility:"hidden",left:"-9999px",top:"-9999px"}),this.fire(c.FIRES.hide)},getValue:function(){var a=this.get("el");return a.one("input").val()}},a.extend(c,b,{}),a.augment(c,c.METHODS),c},{requires:["brix/core/brick"]});